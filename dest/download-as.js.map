{"version":3,"file":"download-as.js","sources":["../src/trigger.js","../src/svg.js","../src/txt.js","../src/cnv.js","../src/svgpng.js","../src/index.js"],"sourcesContent":["let _trigger = null\nconst _triggerID = 'TRIGGER__' + Math.random()\n\nconst trigger = {\n  download (data, filename) {\n    if (!document.getElementById(_triggerID)) {\n      _trigger = document.createElement('a')\n      _trigger.id = _triggerID\n      _trigger.target = '_blank'\n      document.body.appendChild(_trigger)\n    } else {\n      _trigger = document.getElementById(_triggerID)\n    }\n\n    _trigger.download = filename\n    _trigger.href = data\n    _trigger.click()\n  }\n}\n\nexport default trigger\n","import Trigger from './trigger'\n\nexport default (selector, filename) => {\n  const _svg = document.querySelector(selector).outerHTML\n  const _svgEncoded = _svg.replace(/\"/g, '\\'').replace(/[\\r\\n%#()<>?\\[\\\\\\]^`{|}]/g, encodeURIComponent)\n  const _svgData = 'data:image/svg+xml;utf8,' + _svgEncoded\n  Trigger.download(_svgData, filename)\n}\n","import Trigger from './trigger'\n\nexport default (src, filename) => {\n  var uri = 'data:text/plain;charset=utf-8,' + encodeURIComponent(src)\n  Trigger.download(uri, filename)\n}\n","import Trigger from './trigger'\n\nexport default (canvas, filename, format = 'png') => {\n  canvas.toBlob(function (blob) {\n    var newImg = document.createElement('img')\n    var url = URL.createObjectURL(blob)\n    newImg.onload = function () {\n      URL.revokeObjectURL(url)\n    }\n    Trigger.download(url, filename)\n  }, `image/${format}`, 1)\n}\n","import cnv from './cnv'\n\nexport default (selector, filename) => {\n  const svg = document.querySelector(selector)\n  const xml = new XMLSerializer().serializeToString(svg)\n  const svg64 = btoa(xml)\n  const svgData = 'data:image/svg+xml;base64,' + svg64\n\n  const canvas = document.createElement('canvas')\n  canvas.width = 200\n  canvas.height = 200\n\n  const ctx = canvas.getContext('2d')\n\n  const image = new Image()\n  image.onload = function () {\n    ctx.drawImage(image, 0, 0)\n    cnv(canvas, filename)\n  }\n  image.src = svgData\n}\n","import svg from './svg'\nimport txt from './txt'\nimport cnv from './cnv'\nimport svgpng from './svgpng'\n\nexport default { svg, txt, cnv, svgpng }\n"],"names":["_trigger","_triggerID","Math","random","trigger","download","data","filename","document","getElementById","createElement","id","target","body","appendChild","href","click","selector","_svg","querySelector","outerHTML","_svgEncoded","replace","encodeURIComponent","_svgData","Trigger","src","uri","canvas","format","toBlob","blob","newImg","url","URL","createObjectURL","onload","revokeObjectURL","svg","xml","XMLSerializer","serializeToString","svg64","btoa","svgData","width","height","ctx","getContext","image","Image","drawImage","cnv","txt","svgpng"],"mappings":"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"}